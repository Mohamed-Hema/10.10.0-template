package ui

import (
	"strings"

	"github.com/atos-digital/10.10.0-template/internal/middleware"
)

templ Navigation() {
	<nav class="flex gap-3" hx-boost="true">
		@NavLink("Home", "/")
		/
		@NavLink("Form", "/form")
		/
		@NavLink("Search", "/search")
		/
		@NavLink("Data", "/data")
		/
		@NavLink("Contact", "/contact")
		/
		@NavLink("About", "/about")
	</nav>
}

func isActive(ctx context.Context, link templ.SafeURL) bool {
	requestPath := middleware.PathFromContext(ctx)
	if requestPath == string(link) {
		return true
	}
	if string(link) != "/" && strings.HasPrefix(requestPath, string(link)) {
		return true
	}
	return false
}

templ NavLink(name string, link templ.SafeURL) {
	if isActive(ctx, link) {
		<strong><a class="underline" href={ link }>{ name }</a></strong>
	} else {
		<a href={ link }>{ name }</a>
	}
}
